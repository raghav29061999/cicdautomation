flowchart TD
    subgraph Client_Side
        CLI[Test Client]
    end

    subgraph Interfaces
        AgentCard["Public Agent Card (.well-known/agent.json)"]
        ExtendedCard["Extended Agent Card (/agent/authenticatedExtendedCard)"]
    end

    subgraph A2A_Agent_Server
        Resolver[A2ACardResolver]
        A2AClient[A2AClient SDK]
        App[A2AStarletteApplication]
        Handler[DefaultRequestHandler]
        Executor[HelloWorldAgentExecutor]
        Agent[HelloWorldAgent]
        TaskStore[InMemoryTaskStore]
    end

    CLI -->|Fetch Agent Card| Resolver --> AgentCard
    Resolver --> ExtendedCard
    CLI -->|Send message / stream| A2AClient --> App
    App --> Handler
    Handler --> Executor
    Executor --> Agent
    Executor -->|"Returns: Hello World"| Handler
    Handler --> TaskStore
    Handler -->|Responds to Client| A2AClient --> CLI
