sequenceDiagram
    participant User
    participant A2AClient
    participant A2A Server
    participant RequestHandler
    participant CurrencyAgentExecutor
    participant LangGraphAgent
    participant LLM (Gemini/OpenAI)

    User->>A2AClient: Send message (e.g., "How much is 10 USD?")
    A2AClient->>A2A Server: /message/send
    A2A Server->>RequestHandler: Dispatch request
    RequestHandler->>CurrencyAgentExecutor: .execute()
    CurrencyAgentExecutor->>LangGraphAgent: Process query
    LangGraphAgent->>LLM (Gemini/OpenAI): Use LLM + tools
    LLM (Gemini/OpenAI)-->>LangGraphAgent: Return thought/tool result
    LangGraphAgent-->>CurrencyAgentExecutor: Final response or ask clarification

    CurrencyAgentExecutor->>RequestHandler: Enqueue Event(s)
    Note right of RequestHandler: Streaming<br/>status-update,<br/>artifact-update,<br/>input_required
    RequestHandler->>A2AClient: Stream Events
    A2AClient->>User: Display each chunk to user

    alt Input required
        User->>A2AClient: Provide missing info (e.g., "to INR")
        A2AClient->>A2A Server: message/send with taskId
        A2A Server->>RequestHandler: Resume task
    end
